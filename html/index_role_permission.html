<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>権限設定画面モック</title>
    <style>
        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #e5e5df;
            color: #39444d;
            font-size: 14px;
        }

        header {
            background-color: #07111d;
            color: #e5e5df;
            padding: 15px 20px;
            font-size: 18px;
            font-weight: bold;
        }

        .container {
            background-color: white;
            padding: 20px;
            min-height: 100vh;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #39444d;
            margin-bottom: 20px;
        }

        .tab-item {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            color: #5d5d5d;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }

        .tab-item.active {
            color: #07111d;
            border-bottom-color: #d89941;
        }


        /* テーブル */
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 10px;
            border: 1px solid #39444d;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        th {
            background-color: #07111d;
            color: #e5e5df;
            padding: 10px;
            text-align: center;
            border-bottom: 1px solid #39444d;
            font-weight: bold;
        }

        td {
            padding: 10px;
            text-align: center;
            border-bottom: 1px solid #39444d;
            background-color: white;
            vertical-align: middle;
        }

        tbody td:first-child {
            text-align: right;
            padding-right: 14px;
        }

        tbody td:not(:first-child) {
            text-align: left;
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        tbody tr:hover td {
            background-color: #e5e5df;
        }

        tbody td.column-hover {
            background-color: #e5e5df;
        }

        thead th.column-hover-header {
            background-color: #39444d;
        }

        .permission-cell {
            display: inline-flex;
            align-items: center;
            justify-content: flex-start;
            gap: 6px;
        }

        .permission-cell input {
            margin: 0;
        }

        .status-denied {
            color: #ae2c11;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <header>
        権限設定画面
    </header>

    <div class="container">
        <nav class="tabs">
            <div id="tabMain" class="tab-item">ユーザリスト（元請）</div>
            <div id="tabPartner" class="tab-item">ユーザリスト（協力会社）</div>
            <div class="tab-item active">役割権限設定</div>
            <div class="tab-item">変更履歴</div>
        </nav>

        <table id="rolePermissionTable">
            <thead>
                <tr>
                    <th>機能</th>
                    <th>WS権限<br>管理者</th>
                    <th>本部担当者</th>
                    <th>支店担当者</th>
                    <th>支店GF<br>担当者</th>
                    <th>元請招待<br>作業所担当者</th>
                    <th>元請招待<br>閲覧者</th>
                    <th>JV招待</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>作業予定の確認/確認取消</td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                </tr>
                <tr>
                    <td>作業予定の確定/確定取消</td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                </tr>
                <tr>
                    <td>作業実績の確認/確認取消</td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                </tr>
                <tr>
                    <td>作業実績の承認/承認取消</td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                </tr>
                <tr>
                    <td>統責者（予定実績）の承認/承認取消</td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox"><span
                                class="status-denied">不可</span></label></td>
                </tr>
                <tr>
                    <td>元方安全衛生管理者（予定/実績）の承認/承認取消</td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox" checked><span>承認可</span></label>
                    </td>
                    <td><label class="permission-cell"><input type="checkbox"><span
                                class="status-denied">不可</span></label></td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        document.getElementById('tabMain')?.addEventListener('click', () => {
            window.location.href = 'index.html';
        });

        document.getElementById('tabPartner')?.addEventListener('click', () => {
            window.location.href = 'index_partner.html';
        });

        const permissionTable = document.getElementById('rolePermissionTable');
        let activeColIndex = null;

        function syncPermissionLabel(wrapper) {
            const checkbox = wrapper.querySelector('input[type="checkbox"]');
            const label = wrapper.querySelector('span');
            if (!checkbox || !label) return;

            if (checkbox.checked) {
                label.textContent = '承認可';
                label.classList.remove('status-denied');
            } else {
                label.textContent = '不可';
                label.classList.add('status-denied');
            }
        }

        function syncAllPermissionLabels() {
            document.querySelectorAll('.permission-cell').forEach((cell) => {
                syncPermissionLabel(cell);
            });
        }

        function clearColumnHighlight() {
            if (activeColIndex === null || !permissionTable) return;
            permissionTable.querySelectorAll('tbody tr').forEach((row) => {
                const cell = row.children[activeColIndex];
                if (cell) cell.classList.remove('column-hover');
            });
            const headerRow = permissionTable.querySelector('thead tr');
            const headerCell = headerRow?.children[activeColIndex];
            if (headerCell) headerCell.classList.remove('column-hover-header');
            activeColIndex = null;
        }

        permissionTable?.addEventListener('change', (event) => {
            const target = event.target;
            if (target instanceof HTMLInputElement && target.type === 'checkbox') {
                const wrapper = target.closest('.permission-cell');
                if (wrapper) syncPermissionLabel(wrapper);
            }
        });

        permissionTable?.addEventListener('mouseover', (event) => {
            const cell = event.target.closest('td');
            if (!cell || !permissionTable.contains(cell)) return;
            const colIndex = cell.cellIndex;
            if (colIndex === activeColIndex) return;
            clearColumnHighlight();
            activeColIndex = colIndex;
            const headerRow = permissionTable.querySelector('thead tr');
            const headerCell = headerRow?.children[colIndex];
            if (headerCell) headerCell.classList.add('column-hover-header');
            permissionTable.querySelectorAll('tbody tr').forEach((row) => {
                const cellInCol = row.children[colIndex];
                if (cellInCol) cellInCol.classList.add('column-hover');
            });
        });

        permissionTable?.addEventListener('mouseleave', () => {
            clearColumnHighlight();
        });

        syncAllPermissionLabels();
    </script>
</body>

</html>